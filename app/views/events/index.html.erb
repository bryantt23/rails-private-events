<h1>All Events</h1>

<%= @attendees.find{|a| 3==a.event_id} %>
<p>
    current_user <%= current_user.id %>
    </p>
<%# <%= @attendees.find{|a| 3==a.event_id}.user_id %> %>
<br/>
<br/>

<%= @attendees.to_a %>
<br/>
<br/>
<%= @events.to_a %>

<table>
    <tr>
        <th>
            Event ID
        </th>
        <th>
            Title
        </th>
        <th>
            Description
        </th>
        <th>
            Event Creator ID
        </th>
        <th>
            Hosting
        </th>
        <th>
            Attending
        </th>
        <th>
            Event Page
        </th>
        <th>
            Edit
        </th>
        <th>
            Delete
        </th>
    </tr>
    <% @events.each do  |event| %>
        <tr>
            <td>            
                <%= event.id %>
            </td>     
            <td>            
                <%= event.title || "Missing title" %>
            </td>                
            <td>            
                <%= event.description %>
            </td>
            <td>            
                <%= event.user_id %>
            </td>
            <td>           
                <%= event.user_id == current_user.id ? "Hosting" : "Not hosting" %> 
            </td>
            <td>            
                <%= event.user_id == current_user.id ? "Yes Hosting" : @attendees.find{|a| event.id==a.event_id && a.user_id==current_user.id} ? "Attendee":"Non attendee" %> 
            </td>
            <td>
                <%= link_to "Link", event %>
            </td>
            <td>           
                <% if event.user_id == current_user.id %>
                    <%= link_to "Edit", edit_event_path(event) %>
                <% else %>
                    N/A
                <% end %>            
            </td>
            <td>           
                <% if event.user_id == current_user.id %>
                    <%= link_to 'Delete', event_path(event), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?'} %>
                <% else %>
                    N/A
                <% end %>            
            </td>
        </tr>
    <% end %>

</table>
