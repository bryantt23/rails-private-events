<h1>Single Event</h1>

<%= @attendees.find{|a| 3==a.event_id} %>
<p>
    current_user <%= current_user.id %>
    </p>
<%# <%= @attendees.find{|a| 3==a.event_id}.user_id %> %>
<br/>
<br/>

<%= @attendees.to_a %>
<br/>
<br/>
<%= @events.to_a %>
                <%=  @event.user_id == current_user.id ? "dis":"not dis" %>

<h3>
<%= @attendees.to_a.filter{|a| a.user_id!=current_user.id && a.event_id==@event.id }  %>
    </h3>


<p>Event Host ID: <%= @event.user_id %></p>
<table>
    <tr>
        <th>
            Event ID
        </th>
        <th>
            Title
        </th>
        <th>
            Description
        </th>
        <th>
            Event Creator ID
        </th>
        <th>
            Hosting
        </th>
        <th>
            Attending
        </th>
        <th>
            Change Attending
        </th>
    </tr>
    <tr>
        <td>            
            <%= @event.id %>
        </td>     
        <td>            
            <%= @event.title || "Missing title" %>
        </td>                
        <td>            
            <%= @event.description %>
        </td>
        <td>            
            <%= @event.user_id %>
        </td>
        <td>           
            <%= @event.user_id == current_user.id ? "Hosting" : "Not hosting" %> 
        </td>
        <td>
            <%= @event.user_id == current_user.id ? "Yes Hosting" : @attendees.find{|a| @event.id==a.event_id && a.user_id==current_user.id} ? "Attendee":"Non attendee" %> 
        </td>
        <td>                         
            <% if @event.user_id == current_user.id  %>
                N/A
            <% else %>                
                <%= link_to "Change Attending",
                    change_status_event_path(@event), 
                    data:{turbo_method: :patch}
                %>
            <% end %>
        </td>
    </tr>
</table>

<p>Other Attendees</p>
<table>
    <% @attendees.filter{|a| a.user_id!=current_user.id && a.event_id==@event.id }.each do |attendee| %>
       <tr>
            <td>            
                <%= attendee.user_id %>
            </td>     
        </tr>
    <% end %>
</table>
